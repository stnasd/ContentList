{"version":3,"file":"static/js/585.bbb69ba2.chunk.js","mappings":"yIACA,QAAkC,gCAAlC,EAA6H,6BCA7H,EAA+B,6B,aCC/B,MAQA,EAReA,KAEXC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACEF,EAAAA,EAAAA,KAAA,OAAKG,UAAWC,EAAoBF,SAAC,mB,+CCJ3C,SAAgB,IAAM,oBAAoB,WAAa,4BCwFvD,EAhFmBG,KACjB,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,IACtCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,IAClCG,EAAYC,IAAiBJ,EAAAA,EAAAA,UAAS,IACtCK,EAAQC,IAAaN,EAAAA,EAAAA,UAAS,OAC9BO,EAAUC,IAAeR,EAAAA,EAAAA,UAA+B,KAEzD,KAAES,IAASC,EAAAA,EAAAA,OAEjBC,EAAAA,EAAAA,YAAU,KACRP,GAAc,IAAOQ,MAAMC,QAAQJ,GAAQA,EAAKK,OAAS,IACzDN,GAAY,IAAOI,MAAMC,QAAQJ,GAAQA,EAAO,IAAI,GACnD,CAACA,IAEJ,MAAMM,EAAMC,IAML,IANM,MACXC,EAAK,MACLC,GAIDF,EACC,MAAMG,EAAOZ,EAASU,GAChBG,EACJ,SAAMD,EAAKE,GAAK,WAAaF,EAAKG,MAAQ,WAAaH,EAAKI,KACxDC,EAAaJ,EAAKN,OAAS,IAC3BW,EAAYD,EAAaJ,EAAKM,MAAM,EAAG,KAAO,MAAQN,EAE5D,OACEO,EAAAA,EAAAA,MAAA,OAAKT,MAAOA,EAAOvB,UAAWC,EAAOgC,IAAIlC,SAAA,EACvCF,EAAAA,EAAAA,KAAA,KAAAE,SAAI+B,IACHD,IACChC,EAAAA,EAAAA,KAACqC,EAAAA,GAAI,CAACC,GAAE,SAAAC,OAAWZ,EAAKE,IAAM1B,UAAWC,EAAOoC,WAAWtC,UACzDF,EAAAA,EAAAA,KAAA,OAAKG,UAAWC,EAAOqC,gBAAgBvC,SAAC,yDAGxC,EAUJwC,EAAmDC,IACvD,MAAM,gBAAEC,EAAe,aAAEC,GAAiBF,EAClB,YAApBC,GACEC,EAAe,GAAKA,GAAgBhC,IACtCC,GAAWgC,GAAcA,EAAY,OAVrBC,WAChB3B,MAAMC,QAAQJ,KAChBL,GAAeoC,GAAmBA,EAAiB/B,EAAKK,SACxDN,GAAa8B,GAAc,IAAIA,KAAc7B,KAC/C,EAOIgC,GAEJ,EAEF,OACEjD,EAAAA,EAAAA,KAACkD,EAAAA,GAAS,CAAAhD,SACPiD,IAAA,IAAC,OAAEC,EAAM,MAAEC,GAAOF,EAAA,OACjBnD,EAAAA,EAAAA,KAACsD,EAAAA,GAAa,CACZC,SAAUb,EACVU,OAAQA,EACRC,MAAOA,EACPG,UAAW7C,EACX8C,SAAU,GACVC,gBAAiBC,IAA8C,IAA7C,kBAAEC,EAAiB,iBAAEC,GAAkBF,EAErDC,IAAsBtD,GACtBuD,IAAqBpD,IAErBF,EAAcqD,GACdlD,EAAYmD,GACd,EACA3D,SAEDqB,GACa,GAER,EC3DhB,EApBuBuC,KACrB,MAAMC,GAASC,EAAAA,EAAAA,MAEf,OACE7B,EAAAA,EAAAA,MAAAlC,EAAAA,SAAA,CAAAC,SAAA,EACEF,EAAAA,EAAAA,KAACD,EAAM,IACNgE,GACC/D,EAAAA,EAAAA,KAAA,OAAKG,UAAWC,EAAuBF,UACrCF,EAAAA,EAAAA,KAAA,OAAKG,UAAWC,EAAoBF,SAAE6D,OAGxC/D,EAAAA,EAAAA,KAAA,OAAKG,UAAWC,EAAuBF,UACrCF,EAAAA,EAAAA,KAAA,OAAKG,UAAWC,EAAoBF,UAClCF,EAAAA,EAAAA,KAACK,EAAU,UAIhB,C","sources":["webpack://my-app/./src/pages/Home/styles.module.css?399f","webpack://my-app/./src/widgets/header/styles.module.css?4b63","widgets/header/index.tsx","webpack://my-app/./src/widgets/renderList/styles.module.css?bca5","widgets/renderList/index.tsx","pages/Home/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"home__container\":\"styles_home__container__NodD9\",\"home__header\":\"styles_home__header__0TnTt\",\"home__render\":\"styles_home__render__-22FV\"};","// extracted by mini-css-extract-plugin\nexport default {\"home__header\":\"styles_home__header__HO4ld\"};","import styles from \"./styles.module.css\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <>\r\n      <div className={styles.home__header}>Content List</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"row\":\"styles_row__BLUQr\",\"read__more\":\"styles_read__more__hqUZr\"};","import React, { useEffect, useState } from \"react\";\r\nimport { useGetAllPostsQuery } from \"../../features/apiSlice\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { AutoSizer } from \"react-virtualized\";\r\nimport { FixedSizeList, ListOnScrollProps } from \"react-window\";\r\nimport { ICombinedInterface } from \"../../types/types\";\r\n\r\nimport styles from \"./styles.module.css\";\r\n\r\nconst RenderList = () => {\r\n  const [startIndex, setStartIndex] = useState(0);\r\n  const [endIndex, setEndIndex] = useState(9);\r\n  const [totalItems, setTotalItems] = useState(0);\r\n  const [offset, setOffset] = useState(3545);\r\n  const [pageList, setPageList] = useState<ICombinedInterface[]>([]);\r\n\r\n  const { data } = useGetAllPostsQuery();\r\n\r\n  useEffect(() => {\r\n    setTotalItems(() => (Array.isArray(data) ? data.length : 0));\r\n    setPageList(() => (Array.isArray(data) ? data : []));\r\n  }, [data]);\r\n\r\n  const Row = ({\r\n    index,\r\n    style,\r\n  }: {\r\n    index: number;\r\n    style: React.CSSProperties;\r\n  }) => {\r\n    const item = pageList[index];\r\n    const text =\r\n      \"№\" + item.id + \" Title: \" + item.title + \". Body: \" + item.body;\r\n    const isLongText = text.length > 170;\r\n    const shortText = isLongText ? text.slice(0, 152) + \"...\" : text;\r\n\r\n    return (\r\n      <div style={style} className={styles.row}>\r\n        <p>{shortText}</p>\r\n        {isLongText && (\r\n          <Link to={`/post/${item.id}`} className={styles.read__more}>\r\n            <div className={styles.read__more_text}>Просмотр</div>\r\n          </Link>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const loadMoreItems = async () => {\r\n    if (Array.isArray(data)) {\r\n      setTotalItems((prevTotalItems) => prevTotalItems + data.length);\r\n      setPageList((prevstate) => [...prevstate, ...data]);\r\n    }\r\n  };\r\n  const handleScroll: (props: ListOnScrollProps) => any = (e) => {\r\n    const { scrollDirection, scrollOffset } = e;\r\n    if (scrollDirection === \"forward\") {\r\n      if (scrollOffset > 0 && scrollOffset >= offset) {\r\n        setOffset((prevstate) => prevstate + 2500);\r\n        loadMoreItems();\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <AutoSizer>\r\n      {({ height, width }) => (\r\n        <FixedSizeList\r\n          onScroll={handleScroll}\r\n          height={height}\r\n          width={width}\r\n          itemCount={totalItems}\r\n          itemSize={40}\r\n          onItemsRendered={({ visibleStartIndex, visibleStopIndex }) => {\r\n            if (\r\n              visibleStartIndex !== startIndex ||\r\n              visibleStopIndex !== endIndex\r\n            ) {\r\n              setStartIndex(visibleStartIndex);\r\n              setEndIndex(visibleStopIndex);\r\n            }\r\n          }}\r\n        >\r\n          {Row}\r\n        </FixedSizeList>\r\n      )}\r\n    </AutoSizer>\r\n  );\r\n};\r\n\r\nexport default RenderList;\r\n","import { useOutlet } from \"react-router-dom\";\r\n\r\nimport styles from \"./styles.module.css\";\r\nimport Header from \"../../widgets/header\";\r\nimport RenderList from \"../../widgets/renderList\";\r\n\r\nconst Home: React.FC = () => {\r\n  const outlet = useOutlet();\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      {outlet ? (\r\n        <div className={styles.home__container}>\r\n          <div className={styles.home__render}>{outlet}</div>\r\n        </div>\r\n      ) : (\r\n        <div className={styles.home__container}>\r\n          <div className={styles.home__render}>\r\n            <RenderList />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default Home;\r\n"],"names":["Header","_jsx","_Fragment","children","className","styles","RenderList","startIndex","setStartIndex","useState","endIndex","setEndIndex","totalItems","setTotalItems","offset","setOffset","pageList","setPageList","data","useGetAllPostsQuery","useEffect","Array","isArray","length","Row","_ref","index","style","item","text","id","title","body","isLongText","shortText","slice","_jsxs","row","Link","to","concat","read__more","read__more_text","handleScroll","e","scrollDirection","scrollOffset","prevstate","async","prevTotalItems","loadMoreItems","AutoSizer","_ref2","height","width","FixedSizeList","onScroll","itemCount","itemSize","onItemsRendered","_ref3","visibleStartIndex","visibleStopIndex","Home","outlet","useOutlet"],"sourceRoot":""}